generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Usuario {
  id                 Int          @id @default(autoincrement())
  documentoIdentidad String       @unique
  nombre             String
  rol                Rol
  correo             String       @unique
  telefono           String?
  contrasena         String
  asignaturasCreadas Asignatura[] @relation("DocenteAsignaturas")
}

model Estudiante {
  id                 Int        @id @default(autoincrement())
  documentoIdentidad String     @unique
  nombre             String
  carrera            String
  correo             String     @unique
  contrasena         String
  asignaturaId       Int
  asignatura         Asignatura @relation(fields: [asignaturaId], references: [id])
}

model Asignatura {
  id              Int          @id @default(autoincrement())
  nombre          String
  idDocente       Int
  activo          Boolean      @default(true)
  enlaceRegistro  String?      @unique
  fechaExpiracion DateTime?
  docente         Usuario      @relation("DocenteAsignaturas", fields: [idDocente], references: [id])
  estudiantes     Estudiante[]
  material        Material[]
}

model Material {
  id            Int        @id @default(autoincrement())
  nombreArchivo String
  tipoArchivo   String
  datos         Bytes
  asignaturaId  Int
  creadoEn      DateTime   @default(now())
  asignatura    Asignatura @relation(fields: [asignaturaId], references: [id])
}

enum Rol {
  ADMIN
  DOCENTE
  ESTUDIANTE
}
